{% extends 'base.html.twig' %}

{% block title %}Новости компании Теплый Дом{% endblock %}

{% block content %}
    {% set placeholder = 'data:image/svg+xml;charset=UTF-8,' ~
        '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">' ~
        '<defs>' ~
        '<linearGradient id="bgGrad" x1="0" y1="0" x2="0" y2="1">' ~
        '<stop offset="0%" stop-color="%23f8f9fa"/>' ~
        '<stop offset="100%" stop-color="%23e9ecef"/>' ~
        '</linearGradient>' ~
        '</defs>' ~
        '<rect width="100%" height="100%" fill="url(%23bgGrad)"/>' ~
        '<circle cx="60" cy="60" r="20" fill="%23ced4da"/>' ~
        '<path d="M 20 160 L 80 100 L 130 150 L 180 90 L 200 160 Z" fill="%23dee2e6"/>' ~
        '<path d="M 0 170 L 50 120 L 100 160 L 150 110 L 200 170 Z" fill="%23ced4da" opacity="0.8"/>' ~
        '</svg>'
        | url_encode %}
    <div class="container-fluid my-4">
        <div class="row">
            <div class="col-lg-3 d-none d-lg-block">
                <div class="card">
                    <div class="card-header bg-danger text-white">
                        Каталог продукции
                    </div>
                    {{ include('menu-catalog.html.twig') }}
                </div>
                {{ include('_block/subscription.html.twig') }}
            </div>

            <!-- Контент справа -->
            <div class="col-lg-9">
                <h1>{{ main.title }}</h1>
                <div class="news-list">
                    {% for news in list %}
                        <div class="news-item mb-4 pb-4 border-bottom">
                            <div class="row">
                                <!-- Изображение новости -->
                                <div class="col-md-3 mb-3 mb-md-0">

                                    <a href="/about/news/{{ news.slug }}">

                                        <img src="{{ news.image ? news.image : placeholder }}" alt="{{ news.title }}"
                                             class="img-fluid rounded"
                                             style="max-height: 180px; width: 100%; object-fit: cover;">
                                    </a>
                                </div>

                                <!-- Контент новости -->
                                <div class="col-md-9">
                                    <!-- Заголовок и дата -->
                                    <h3 class="h5 mb-2">
                                        <a href="/about/news/{{ news.slug }}" class="text-decoration-none text-dark">{{ news.title }}</a>
                                    </h3>

                                    <div class="text-muted small mb-2">
                                        <i class="far fa-calendar-alt me-1"></i> {{ news.datetime|date("d.m.Y") }}
                                    </div>

                                    <!-- Анонс новости -->
                                    <p class="mb-2">{{ news.description|u.truncate(200, '...', false)|raw }}</p>

                                    <!-- Ссылка "Подробнее" -->
                                    <a href="/about/news/{{ news.slug }}" class="btn btn-sm btn-outline-primary">Подробнее</a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}


                    <div class="text-center mt-4">
                        <a href="/about/news/" class="btn btn-danger">Все новости</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
